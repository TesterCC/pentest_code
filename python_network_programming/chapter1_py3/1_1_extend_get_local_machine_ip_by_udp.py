#!/usr/bin/env python
# -*- coding:utf-8 -*-
__author__ = 'MFC'
__time__ = '2020-04-30 21:44'

"""
https://www.cnblogs.com/jddreams/p/10238808.html
目标：通过 UDP 获取本机 IP，没有任何的依赖。
原理： 利用 UDP 协议来实现的，生成一个UDP包，把自己的 IP 放如到 UDP 协议头中，然后从UDP包中获取本机的IP。
"""

import socket

def get_host_ip():

    ip = ''

    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

    try:
        s.connect(('8.8.8.8', 80))
        ip = s.getsockname()[0] if s.getsockname() else ''
    except Exception as err:
        print(err)
    finally:
        s.close()
    return ip


if __name__ == '__main__':
    ret = get_host_ip()   # get localhost LAN IP
    print(ret)
