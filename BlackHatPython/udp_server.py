# coding=utf-8
"""
DATE:   2023/09/07
"""

# Simple UDP Server

import socket
import threading

IP = '0.0.0.0'
PORT = 514
RECEIVE_BUFFER_SIZE = 1450   # 防粘包


def main():
    server = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    server.bind((IP, PORT))
    print(f'[*] Listening on {IP}:{PORT}')

    while True:
        # 当一个客户端成功建立链接的时候，将接收到的客户端socket对应保存到client变量中，将远程连接的详细信息保存到address变量中。

        # todo debug
        data, address = server.recvfrom(RECEIVE_BUFFER_SIZE)

        print(f"[D] Receive UDP data from {address}, data content is: {data.decode('utf-8')}")


if __name__ == '__main__':
    main()
